<!DOCTYPE html>
<html>
<head>
    <title>Socket.IO Test</title>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
</head>
<body>
    <h1>Socket.IO Connection Test</h1>
    <div id="status">Connecting...</div>
    <div id="logs"></div>

    <script>
        const logs = document.getElementById('logs');
        const status = document.getElementById('status');
        
        function log(message) {
            console.log(message);
            logs.innerHTML += '<p>' + message + '</p>';
        }

        log('Starting connection test...');
        
        const socket = io({
            path: '/socket.io',
            transports: ['polling', 'websocket'],
            upgrade: true,
            timeout: 10000,
            forceNew: true,
            autoConnect: true
        });

        socket.on('connect', () => {
            log('✅ Connected successfully!');
            status.textContent = 'Connected';
            status.style.color = 'green';
        });

        socket.on('disconnect', (reason) => {
            log('❌ Disconnected: ' + reason);
            status.textContent = 'Disconnected';
            status.style.color = 'red';
        });

        socket.on('connect_error', (error) => {
            log('🔥 Connection error: ' + error);
            status.textContent = 'Error';
            status.style.color = 'red';
        });

        log('Socket configuration: ' + JSON.stringify({
            path: '/socket.io',
            transports: ['polling', 'websocket'],
            upgrade: true,
            timeout: 10000
        }));
    </script>
</body>
</html>
